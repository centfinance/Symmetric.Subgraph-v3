description: Balancer is a non-custodial portfolio manager, liquidity provider, and price sensor.
features:
  - grafting
graft:
  base: QmdDQKt3Q8AaWHmTKGLFXxsgrEikNSofqMu7LqYtTGntKh
  block: 118625000
specVersion: 0.0.2
repository: https://github.com/balancer-labs/balancer-subgraph-v2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: EventEmitter
    network: optimism
    source:
      address: '0x082990116f256E078572a1b69772115d2cF6b0a2'
      abi: EventEmitter
      startBlock: 99124541
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/eventEmitter.ts
      entities:
        - Pool
      abis:
        - name: EventEmitter
          file: ./abis/EventEmitter.json
      eventHandlers:
        - event: LogArgument(indexed address,indexed bytes32,bytes,uint256)
          handler: handleLogArgument
  - kind: ethereum/contract
    name: Vault
    network: optimism
    source:
      address: '0xBA12222222228d8Ba445958a75a0704d566BF2C8'
      abi: Vault
      startBlock: 7003431
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/vault.ts
      entities:
        - Balancer
        - Pool
        - PoolToken
        - User
        - UserInternalBalance
        - Token
        - TokenSnapshot
        - TradePair
        - TradePairSnapshot
        - BalancerSnapshot
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: StablePool
          file: ./abis/StablePool.json
        - name: WeightedPoolFactory
          file: ./abis/WeightedPoolFactory.json
        - name: AaveLinearPool
          file: ./abis/AaveLinearPool.json
        - name: FXPool
          file: ./abis/FXPool.json
      eventHandlers:
        - event: Swap(indexed bytes32,indexed address,indexed address,uint256,uint256)
          handler: handleSwapEvent
        - event: PoolBalanceChanged(indexed bytes32,indexed address,address[],int256[],uint256[])
          handler: handleBalanceChange
        - event: PoolBalanceManaged(indexed bytes32,indexed address,indexed address,int256,int256)
          handler: handleBalanceManage
        - event: InternalBalanceChanged(indexed address,indexed address,int256)
          handler: handleInternalBalanceChange
  - kind: ethereum/contract
    name: WeightedPoolFactory
    network: optimism
    source:
      address: '0xdAE7e32ADc5d490a43cCba1f0c736033F2b4eFca'
      abi: WeightedPoolFactory
      startBlock: 7005512
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPoolFactory
          file: ./abis/WeightedPoolFactory.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewWeightedPool
  - kind: ethereum/contract
    name: WeightedPoolV2Factory
    network: optimism
    source:
      address: '0xad901309d9e9DbC5Df19c84f729f429F0189a633'
      abi: WeightedPoolFactory
      startBlock: 22410483
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPoolFactory
          file: ./abis/WeightedPoolFactory.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewWeightedPoolV2
  - kind: ethereum/contract
    name: WeightedPoolV3Factory
    network: optimism
    source:
      address: '0xA0DAbEBAAd1b243BBb243f933013d560819eB66f'
      abi: WeightedPoolFactory
      startBlock: 72832703
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPoolFactory
          file: ./abis/WeightedPoolFactory.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewWeightedPoolV3
  - kind: ethereum/contract
    name: WeightedPoolV4Factory
    network: optimism
    source:
      address: '0x230a59F4d9ADc147480f03B0D3fFfeCd56c3289a'
      abi: WeightedPoolFactory
      startBlock: 82737545
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPoolFactory
          file: ./abis/WeightedPoolFactory.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
        - name: ComposableStablePool
          file: ./abis/ComposableStablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewWeightedPoolV4
  - kind: ethereum/contract
    name: WeightedPool2TokenFactory
    network: optimism
    source:
      address: '0x0F3e0c4218b7b0108a3643cFe9D3ec0d4F57c54e'
      abi: WeightedPoolFactory
      startBlock: 7005518
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: WeightedPoolFactory
          file: ./abis/WeightedPoolFactory.json
        - name: WeightedPool2Tokens
          file: ./abis/WeightedPool2Tokens.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewWeighted2TokenPool
  - kind: ethereum/contract
    name: StablePoolV2Factory
    network: optimism
    source:
      address: '0xeb151668006CD04DAdD098AFd0a82e78F77076c3'
      abi: StablePoolFactory
      startBlock: 11088891
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: StablePoolFactory
          file: ./abis/StablePoolFactory.json
        - name: StablePool
          file: ./abis/StablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewStablePoolV2
  - kind: ethereum/contract
    name: MetaStablePoolFactory
    network: optimism
    source:
      address: '0xb08E16cFc07C684dAA2f93C70323BAdb2A6CBFd2'
      abi: MetaStablePoolFactory
      startBlock: 7005662
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: MetaStablePoolFactory
          file: ./abis/MetaStablePoolFactory.json
        - name: StablePool
          file: ./abis/StablePool.json
        - name: MetaStablePool
          file: ./abis/MetaStablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewMetaStablePool
  - kind: ethereum/contract
    name: TempLiquidityBootstrappingPoolFactory
    network: optimism
    source:
      address: '0xf302f9F50958c5593770FDf4d4812309fF77414f'
      abi: LiquidityBootstrappingPoolFactory
      startBlock: 7005915
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: LiquidityBootstrappingPoolFactory
          file: ./abis/LiquidityBootstrappingPoolFactory.json
        - name: LiquidityBootstrappingPool
          file: ./abis/LiquidityBootstrappingPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewLiquidityBootstrappingPool
  - kind: ethereum/contract
    name: ManagedPoolV2Factory
    network: optimism
    source:
      address: '0x4C32a8a8fDa4E24139B51b456B42290f51d6A1c4'
      abi: ManagedPoolV2Factory
      startBlock: 90348540
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
        - name: ManagedPoolV2Factory
          file: ./abis/ManagedPoolV2Factory.json
        - name: ManagedPool
          file: ./abis/ManagedPoolV2.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewManagedPoolV2
  - kind: ethereum/contract
    name: ComposableStablePoolFactory
    network: optimism
    source:
      address: '0xf145caFB67081895EE80eB7c04A30Cf87f07b745'
      abi: ComposableStablePoolFactory
      startBlock: 22182522
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ComposableStablePoolFactory
          file: ./abis/ComposableStablePoolFactory.json
        - name: ComposableStablePool
          file: ./abis/ComposableStablePool.json
        - name: StablePool
          file: ./abis/StablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewComposableStablePool
  - kind: ethereum/contract
    name: ComposableStablePoolV3Factory
    network: optimism
    source:
      address: '0xe2E901AB09f37884BA31622dF3Ca7FC19AA443Be'
      abi: ComposableStablePoolV2Factory
      startBlock: 72832821
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ComposableStablePoolV2Factory
          file: ./abis/ComposableStablePoolV2Factory.json
        - name: ComposableStablePool
          file: ./abis/ComposableStablePool.json
        - name: StablePool
          file: ./abis/StablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewComposableStablePoolV3
  - kind: ethereum/contract
    name: ComposableStablePoolV4Factory
    network: optimism
    source:
      address: '0x1802953277FD955f9a254B80Aa0582f193cF1d77'
      abi: ComposableStablePoolV2Factory
      startBlock: 82748180
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ComposableStablePoolV2Factory
          file: ./abis/ComposableStablePoolV2Factory.json
        - name: ComposableStablePool
          file: ./abis/ComposableStablePool.json
        - name: StablePool
          file: ./abis/StablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewComposableStablePoolV4
  - kind: ethereum/contract
    name: ComposableStablePoolV5Factory
    network: optimism
    source:
      address: '0x043A2daD730d585C44FB79D2614F295D2d625412'
      abi: ComposableStablePoolV2Factory
      startBlock: 106574795
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ComposableStablePoolV2Factory
          file: ./abis/ComposableStablePoolV2Factory.json
        - name: ComposableStablePool
          file: ./abis/ComposableStablePool.json
        - name: StablePool
          file: ./abis/StablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewComposableStablePoolV5
  - kind: ethereum/contract
    name: ComposableStablePoolV6Factory
    network: optimism
    source:
      address: '0x4bdCc2fb18AEb9e2d281b0278D946445070EAda7'
      abi: ComposableStablePoolV2Factory
      startBlock: 116694338
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ComposableStablePoolV2Factory
          file: ./abis/ComposableStablePoolV2Factory.json
        - name: ComposableStablePool
          file: ./abis/ComposableStablePool.json
        - name: StablePool
          file: ./abis/StablePool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewComposableStablePoolV6
  - kind: ethereum/contract
    name: AaveLinearPoolV2Factory
    network: optimism
    source:
      address: '0x994086630773dC6cB54D3A5E0Ef0963532789E75'
      abi: AaveLinearPoolFactory
      startBlock: 20254495
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: AaveLinearPoolFactory
          file: ./abis/AaveLinearPoolFactory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: AaveLinearPool
          file: ./abis/AaveLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewAaveLinearPoolV2
  - kind: ethereum/contract
    name: AaveLinearPoolV3Factory
    network: optimism
    source:
      address: '0xAd3CC7852382C09fdCE54784292c6aB7fb9Df917'
      abi: AaveLinearPoolV3Factory
      startBlock: 46527984
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: AaveLinearPoolV3Factory
          file: ./abis/AaveLinearPoolV3Factory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: AaveLinearPool
          file: ./abis/AaveLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewAaveLinearPoolV3
        - event: AaveLinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: AaveLinearPoolV4Factory
    network: optimism
    source:
      address: '0xf23b4DB826DbA14c0e857029dfF076b1c0264843'
      abi: AaveLinearPoolV4Factory
      startBlock: 73524584
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: AaveLinearPoolV4Factory
          file: ./abis/AaveLinearPoolV4Factory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: AaveLinearPool
          file: ./abis/AaveLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewAaveLinearPoolV4
        - event: AaveLinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: AaveLinearPoolV5Factory
    network: optimism
    source:
      address: '0x7396f99B48e7436b152427bfA3DD6Aa8C7C6d05B'
      abi: AaveLinearPoolV5Factory
      startBlock: 90009956
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: AaveLinearPoolV5Factory
          file: ./abis/AaveLinearPoolV5Factory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: AaveLinearPool
          file: ./abis/AaveLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewAaveLinearPoolV5
        - event: AaveLinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: ERC4626LinearPoolFactory
    network: optimism
    source:
      address: '0x4C4287b07d293E361281bCeEe8715c8CDeB64E34'
      abi: ERC4626LinearPoolFactory
      startBlock: 13408880
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ERC4626LinearPoolFactory
          file: ./abis/ERC4626LinearPoolFactory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: ERC4626LinearPool
          file: ./abis/ERC4626LinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewERC4626LinearPool
  - kind: ethereum/contract
    name: ERC4626LinearPoolV3Factory
    network: optimism
    source:
      address: '0xa3B9515A9c557455BC53F7a535A85219b59e8B2E'
      abi: ERC4626LinearPoolV3Factory
      startBlock: 73010766
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ERC4626LinearPoolV3Factory
          file: ./abis/ERC4626LinearPoolV3Factory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: ERC4626LinearPoolV3
          file: ./abis/ERC4626LinearPoolV3.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewERC4626LinearPoolV3
        - event: Erc4626LinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: ERC4626LinearPoolV4Factory
    network: optimism
    source:
      address: '0x7ADbdabaA80F654568421887c12F09E0C7BD9629'
      abi: ERC4626LinearPoolV4Factory
      startBlock: 90009334
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ERC4626LinearPoolV4Factory
          file: ./abis/ERC4626LinearPoolV4Factory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: ERC4626LinearPoolV3
          file: ./abis/ERC4626LinearPoolV3.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewERC4626LinearPoolV4
        - event: Erc4626LinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: ReaperLinearPoolFactory
    network: optimism
    source:
      address: '0x19968D4b7126904Fd665eD25417599Df9604Df83'
      abi: ReaperLinearPoolFactory
      startBlock: 22842161
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ReaperLinearPoolFactory
          file: ./abis/ReaperLinearPoolFactory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: ReaperLinearPool
          file: ./abis/ReaperLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewReaperLinearPool
        - event: ReaperLinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: ReaperLinearPoolV3Factory
    network: optimism
    source:
      address: '0xe4B88E745Dce9084B9fc2439F85A9a4C5CD6f361'
      abi: ReaperLinearPoolFactory
      startBlock: 29896926
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: ReaperLinearPoolFactory
          file: ./abis/ReaperLinearPoolFactory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: ReaperLinearPool
          file: ./abis/ReaperLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewReaperLinearPoolV3
  - kind: ethereum/contract
    name: YearnLinearPoolFactory
    network: optimism
    source:
      address: '0xD8B6b96c88ad626EB6209c4876e3B14f45f8803A'
      abi: YearnLinearPoolFactory
      startBlock: 74613637
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: YearnLinearPoolFactory
          file: ./abis/YearnLinearPoolFactory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: YearnLinearPool
          file: ./abis/YearnLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewYearnLinearPool
        - event: YearnLinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: YearnLinearPoolV2Factory
    network: optimism
    source:
      address: '0x19DFEF0a828EEC0c85FbB335aa65437417390b85'
      abi: YearnLinearPoolV2Factory
      startBlock: 90034049
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: YearnLinearPoolV2Factory
          file: ./abis/YearnLinearPoolV2Factory.json
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: YearnLinearPool
          file: ./abis/YearnLinearPool.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewYearnLinearPoolV2
        - event: YearnLinearPoolCreated(indexed address,indexed uint256)
          handler: handleLinearPoolProtocolId
  - kind: ethereum/contract
    name: GyroEV2PoolFactory
    network: optimism
    source:
      address: '0x9b683ca24b0e013512e2566b68704dbe9677413c'
      abi: GyroEV2PoolFactory
      startBlock: 97253023
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Balancer
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: GyroEV2Pool
          file: ./abis/GyroEV2Pool.json
        - name: GyroEV2PoolFactory
          file: ./abis/GyroEV2PoolFactory.json
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewGyroEV2Pool
  - kind: ethereum/contract
    name: ProtocolIdRegistry
    network: optimism
    source:
      address: '0x9805dcfD25e6De36bad8fe9D3Fe2c9b44B764102'
      abi: ProtocolIdRegistry
      startBlock: 77557576
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - ProtocolIdData
      abis:
        - name: ProtocolIdRegistry
          file: ./abis/ProtocolIdRegistry.json
      eventHandlers:
        - event: ProtocolIdRegistered(indexed uint256,string)
          handler: handleProtocolIdRegistryOrRename
        - event: ProtocolIdRenamed(indexed uint256,string)
          handler: handleProtocolIdRegistryOrRename
templates:
  - kind: ethereum/contract
    name: WeightedPool
    network: optimism
    source:
      abi: WeightedPool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
      abis:
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: WeightedPoolV2
    network: optimism
    source:
      abi: WeightedPoolV2
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
      abis:
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: ProtocolFeePercentageCacheUpdated(indexed uint256,uint256)
          handler: handleProtocolFeePercentageCacheUpdated
        - event: RecoveryModeStateChanged(bool)
          handler: handleRecoveryModeStateChanged
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: WeightedPool2Tokens
    network: optimism
    source:
      abi: WeightedPool2Tokens
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
      abis:
        - name: WeightedPool2Tokens
          file: ./abis/WeightedPool2Tokens.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: OracleEnabledChanged(bool)
          handler: handleOracleEnabledChanged
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: StablePool
    network: optimism
    source:
      abi: StablePool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
      abis:
        - name: StablePool
          file: ./abis/StablePool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: AmpUpdateStarted(uint256,uint256,uint256,uint256)
          handler: handleAmpUpdateStarted
        - event: AmpUpdateStopped(uint256)
          handler: handleAmpUpdateStopped
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: MetaStablePool
    network: optimism
    source:
      abi: MetaStablePool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - PriceRateProvider
      abis:
        - name: MetaStablePool
          file: ./abis/MetaStablePool.json
        - name: StablePool
          file: ./abis/StablePool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: AmpUpdateStarted(uint256,uint256,uint256,uint256)
          handler: handleAmpUpdateStarted
        - event: AmpUpdateStopped(uint256)
          handler: handleAmpUpdateStopped
        - event: PriceRateProviderSet(indexed address,indexed address,uint256)
          handler: handlePriceRateProviderSet
        - event: PriceRateCacheUpdated(indexed address,uint256)
          handler: handlePriceRateCacheUpdated
        - event: OracleEnabledChanged(bool)
          handler: handleOracleEnabledChanged
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: ConvergentCurvePool
    network: optimism
    source:
      abi: ConvergentCurvePool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
      abis:
        - name: ConvergentCurvePool
          file: ./abis/ConvergentCurvePool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
  - kind: ethereum/contract
    name: LiquidityBootstrappingPool
    network: optimism
    source:
      abi: LiquidityBootstrappingPool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: LiquidityBootstrappingPool
          file: ./abis/LiquidityBootstrappingPool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: SwapEnabledSet(bool)
          handler: handleSwapEnabledSet
        - event: GradualWeightUpdateScheduled(uint256,uint256,uint256[],uint256[])
          handler: handleGradualWeightUpdateScheduled
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: InvestmentPool
    network: optimism
    source:
      abi: InvestmentPool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: InvestmentPool
          file: ./abis/InvestmentPool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: SwapEnabledSet(bool)
          handler: handleSwapEnabledSet
        - event: GradualWeightUpdateScheduled(uint256,uint256,uint256[],uint256[])
          handler: handleGradualWeightUpdateScheduled
        - event: ManagementFeePercentageChanged(uint256)
          handler: handleManagementFeePercentageChanged
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: ManagedPool
    network: optimism
    source:
      abi: ManagedPool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
        - name: ManagedPool
          file: ./abis/ManagedPoolV2.json
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapEnabledSet(bool)
          handler: handleSwapEnabledSet
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
        - event: JoinExitEnabledSet(bool)
          handler: handleJoinExitEnabledSet
        - event: MustAllowlistLPsSet(bool)
          handler: handleMustAllowlistLPsSet
        - event: RecoveryModeStateChanged(bool)
          handler: handleRecoveryModeStateChanged
        - event: CircuitBreakerSet(indexed address,uint256,uint256,uint256)
          handler: handleCircuitBreakerSet
        - event: TokenAdded(indexed address,uint256)
          handler: handleTokenAdded
        - event: TokenRemoved(indexed address)
          handler: handleTokenRemoved
        - event: ManagementAumFeeCollected(uint256)
          handler: handleManagementAumFeeCollected
        - event: GradualSwapFeeUpdateScheduled(uint256,uint256,uint256,uint256)
          handler: handleGradualSwapFeeUpdateScheduled
        - event: GradualWeightUpdateScheduled(uint256,uint256,uint256[],uint256[])
          handler: handleGradualWeightUpdateScheduled
        - event: ManagementAumFeePercentageChanged(uint256)
          handler: handleManagementAumFeePercentageChanged
        - event: ProtocolFeePercentageCacheUpdated(bytes32)
          handler: handleEncodedProtocolFeePercentageCacheUpdated
  - kind: ethereum/contract
    name: StablePhantomPool
    network: optimism
    source:
      abi: StablePhantomPool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: StablePhantomPool
          file: ./abis/StablePhantomPool.json
        - name: StablePool
          file: ./abis/StablePool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: AmpUpdateStarted(uint256,uint256,uint256,uint256)
          handler: handleAmpUpdateStarted
        - event: AmpUpdateStopped(uint256)
          handler: handleAmpUpdateStopped
        - event: TokenRateProviderSet(indexed address,indexed address,uint256)
          handler: handlePriceRateProviderSet
        - event: TokenRateCacheUpdated(indexed address,uint256)
          handler: handlePriceRateCacheUpdated
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: StablePhantomPoolV2
    network: optimism
    source:
      abi: ComposableStablePool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: ComposableStablePool
          file: ./abis/ComposableStablePool.json
        - name: StablePool
          file: ./abis/StablePool.json
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: AmpUpdateStarted(uint256,uint256,uint256,uint256)
          handler: handleAmpUpdateStarted
        - event: AmpUpdateStopped(uint256)
          handler: handleAmpUpdateStopped
        - event: TokenRateProviderSet(indexed uint256,indexed address,uint256)
          handler: handleTokenRateProviderSet
        - event: TokenRateCacheUpdated(indexed uint256,uint256)
          handler: handleTokenRateCacheUpdated
        - event: ProtocolFeePercentageCacheUpdated(indexed uint256,uint256)
          handler: handleProtocolFeePercentageCacheUpdated
        - event: RecoveryModeStateChanged(bool)
          handler: handleRecoveryModeStateChanged
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: LinearPool
    network: optimism
    source:
      abi: LinearPool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: LinearPool
          file: ./abis/LinearPool.json
        - name: WeightedPoolV2
          file: ./abis/WeightedPoolV2.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: TargetsSet(indexed address,uint256,uint256)
          handler: handleTargetsSet
        - event: RecoveryModeStateChanged(bool)
          handler: handleRecoveryModeStateChanged
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
  - kind: ethereum/contract
    name: Gyro2Pool
    network: optimism
    source:
      abi: Gyro2V2Pool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: Gyro2V2Pool
          file: ./abis/Gyro2V2Pool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: PausedLocally()
          handler: handlePauseGyroPool
        - event: UnpausedLocally()
          handler: handleUnpauseGyroPool
  - kind: ethereum/contract
    name: Gyro3Pool
    network: optimism
    source:
      abi: Gyro3Pool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: Gyro3Pool
          file: ./abis/Gyro3Pool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: PausedLocally()
          handler: handlePauseGyroPool
        - event: UnpausedLocally()
          handler: handleUnpauseGyroPool
  - kind: ethereum/contract
    name: GyroEPool
    network: optimism
    source:
      abi: GyroEV2Pool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: GyroEV2Pool
          file: ./abis/GyroEV2Pool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: SwapFeePercentageChanged(uint256)
          handler: handleSwapFeePercentageChange
        - event: PausedLocally()
          handler: handlePauseGyroPool
        - event: UnpausedLocally()
          handler: handleUnpauseGyroPool
  - kind: ethereum/contract
    name: FXPoolDeployer
    network: optimism
    source:
      abi: FXPoolDeployer
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolFactory.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: Vault
          file: ./abis/Vault.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: WeightedPool
          file: ./abis/WeightedPool.json
        - name: FXPool
          file: ./abis/FXPool.json
        - name: FXPoolDeployer
          file: ./abis/FXPoolDeployer.json
        - name: Assimilator
          file: ./abis/Assimilator.json
        - name: ChainlinkPriceFeed
          file: ./abis/ChainlinkPriceFeed.json
        - name: AggregatorConverter
          file: ./abis/AggregatorConverter.json
        - name: OunceToGramOracle
          file: ./abis/OunceToGramOracle.json
      eventHandlers:
        - event: NewFXPool(indexed address,indexed bytes32,indexed address)
          handler: handleNewFXPoolV2
  - kind: ethereum/contract
    name: FXPool
    network: optimism
    source:
      abi: FXPool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - Pool
        - PoolShare
        - Swap
        - PoolToken
        - GradualWeightUpdate
      abis:
        - name: FXPool
          file: ./abis/FXPool.json
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: ParametersSet(uint256,uint256,uint256,uint256,uint256)
          handler: handleParametersSet
  - kind: ethereum/contract
    name: OffchainAggregator
    network: optimism
    source:
      abi: AccessControlledOffchainAggregator
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/pricing.ts
      entities:
        - Token
      abis:
        - name: AccessControlledOffchainAggregator
          file: ./abis/AccessControlledOffchainAggregator.json
      eventHandlers:
        - event: AnswerUpdated(indexed int256,indexed uint256,uint256)
          handler: handleAnswerUpdated

